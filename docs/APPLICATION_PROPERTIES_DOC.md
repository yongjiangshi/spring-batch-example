# application.properties Technical Deep Dive

## 1. Introduction

The `application.properties` file is the core configuration file for a Spring Boot application. It provides a centralized place to manage all configurable parameters, from database connections to batch job behavior and logging levels. By externalizing configuration, we can easily tune, deploy, and maintain the application without modifying any Java code.

This document will analyze every configuration property used in this project.

---

## 2. H2 Database Configuration

This section configures the H2 in-memory database used for development and testing.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `spring.datasource.url` | `jdbc:h2:mem:testdb` | The JDBC connection URL for the H2 database. `mem:testdb` indicates that this is an in-memory database named `testdb`; the data will be lost when the application stops. |
| `spring.datasource.driverClassName` | `org.h2.Driver` | The JDBC driver class for the H2 database. |
| `spring.datasource.username` | `sa` | The username for the database connection. |
| `spring.datasource.password` | `password` | The password for the database connection. |
| `spring.h2.console.enabled` | `true` | Enables the H2 database's web console. |
| `spring.h2.console.path` | `/h2-console` | The access path for the H2 console, accessible at `http://localhost:8080/h2-console`. |

---

## 3. JPA/Hibernate Configuration

This section controls the behavior of JPA (Java Persistence API) and its implementer, Hibernate.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `spring.jpa.database-platform` | `org.hibernate.dialect.H2Dialect` | Specifies the database dialect Hibernate should use to generate SQL optimized for H2. |
| `spring.jpa.hibernate.ddl-auto` | `none` | Controls Hibernate's database schema generation strategy. `none` is a best practice for production, meaning Hibernate will not automatically create or modify tables, relying instead on scripts like `schema.sql`. |
| `spring.jpa.show-sql` | `true` | Prints the SQL statements generated by Hibernate to the console, which is useful for debugging. |
| `spring.jpa.properties.hibernate.format_sql` | `true` | Formats the printed SQL statements to improve readability. |
| `spring.sql.init.mode` | `always` | Sets the database initialization mode. `always` means that SQL scripts will be executed every time the application starts. |
| `spring.sql.init.schema-locations` | `classpath:schema.sql` | Specifies the location of the SQL script used to initialize the database schema. `classpath:` indicates that the file is located in the project's resource path. |

---

## 4. Spring Batch Configuration

This section is dedicated to configuring the behavior of the Spring Batch framework.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `spring.batch.job.enabled` | `false` | Disables the automatic execution of all defined Jobs when the application starts. In this project, we use a `CommandLineRunner` to precisely control when the Job is launched. |
| `spring.batch.initialize-schema` | `always` | Controls the initialization of Spring Batch metadata tables. `always` ensures that the `BATCH_*` tables, used for storing job execution state, are checked and created on every startup. |
| `spring.batch.job.names` | `productEtlJob` | (Optional) The name of a specific job to be triggered from the command line. |

---

## 5. Logging Configuration

This section finely controls the log output levels for different code paths.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `logging.level.root` | `INFO` | Sets the root logging level to `INFO`. All loggers not explicitly specified will inherit this level. |
| `logging.level.org.springframework.batch` | `INFO` | Sets the logging level for the Spring Batch framework itself to `INFO` to observe core events. |
| `logging.level.com.example.productdataetl` | `DEBUG` | Sets the logging level for our own application code to `DEBUG` to get detailed debugging information. |
| `logging.level.com.example.productdataetl.listener` | `INFO` | Sets the listener's logging level to `INFO` so that it clearly reports job and step lifecycle events in standard runs. |
| `logging.level.com.example.productdataetl.config.CustomSkipPolicy` | `WARN` | Sets the skip policy's logging level to `WARN` to only log warnings when a skip occurs. |
| `logging.level.org.springframework.retry` | `DEBUG` | Enables `DEBUG` logging for the Spring Retry framework to observe the detailed retry process. |
| `logging.level.org.hibernate.SQL` | `DEBUG` | Makes Hibernate print the executed SQL statements (equivalent to `spring.jpa.show-sql=true`). |
| `logging.level.org.hibernate.type.descriptor.sql.BasicBinder` | `TRACE` | Setting this to `TRACE` allows you to see the actual parameter values being bound to the SQL PreparedStatement, which is a powerful tool for SQL debugging. |

---

## 6. File and Batch Processing Configuration

These are custom business and performance-related parameters injected into the Java code via the `@Value` annotation.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `batch.input.file` | `classpath:products.csv` | Defines the location of the input CSV file. |
| `batch.output.file` | `file:sales_report.csv` | Defines the location of the output report file. `file:` indicates a file system path relative to the project root. |
| `batch.csv.skip.lines` | `1` | Skips the first line when reading the CSV (which is typically the header). |
| `batch.chunk.size` | `10` | Defines the "chunk size" for batch processing, i.e., the number of records processed in each transaction. This is a key parameter affecting performance and memory usage. |
| `batch.page.size` | `100` | The size of each page when the `JpaPagingItemReader` reads data from the database. |
| `batch.skip.limit` | `5` | The maximum number of records that can be skipped during the execution of a Step. If this limit is exceeded, the Step will fail. |
| `batch.retry.limit` | `3` | The maximum number of retry attempts for retryable, transient exceptions. |

---

## 7. Monitoring and Management Configuration

This section configures Spring Boot Actuator and JMX for application monitoring and management.

| Property Key | Example Value | Description |
| :--- | :--- | :--- |
| `spring.jmx.enabled` | `true` | Enables Java Management Extensions (JMX), allowing the application to be monitored and managed via a JMX client (like JConsole). |
| `management.endpoints.web.exposure.include` | `health,info,metrics,beans` | Exposes Actuator endpoints over HTTP. `health` checks the application's health, `info` displays application info, `metrics` provides metrics, and `beans` shows all Spring Beans. |
| `management.endpoint.health.show-details` | `always` | Always shows detailed health information when accessing the `/actuator/health` endpoint. |
| `info.app.name` | `Product Data ETL` | Custom application information that will be displayed at the `/actuator/info` endpoint. |
